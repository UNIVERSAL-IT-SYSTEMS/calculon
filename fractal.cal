let cr = r;
let ci = i;
let maxi = 32;

let iterations(r, i, n) =
	if n > maxi or (r*r + i*i) > 4 then
		n
	else
		iterations(r*r - i*i + cr, 2*r*i + ci, n+1);

let n = iterations(r, i, 0);
if n > maxi then 0 else n/maxi